/**
 * Core Philosophy: This ruleset establishes a secure, public read-only model for the Neup Group application's data.
 * All core data collections (ventures, capabilities, job opportunities, partnerships) are publicly accessible for read
 * operations by any user, including unauthenticated visitors. All client-side write operations (create, update, delete)
 * are explicitly forbidden to ensure data integrity. This model assumes that all content is managed by trusted
 * administrators through a separate backend service or the Firebase Console, not by end-users of the public application.
 *
 * Data Structure: The data is organized into four distinct, top-level collections: /ventures, /capabilities,
 * /jobOpportunities, and /partnerships. This flat structure avoids complex relational security rules and improves
 * query performance, as there are no hierarchical authorization dependencies between collections.
 *
 * Key Security Decisions:
 * - Public Read Access: All collections are configured to allow `get` and `list` operations for everyone.
 * - Write Lockdown: All `create`, `update`, and `delete` operations are disabled for all client-side requests. This is
 *   the most secure posture for a content-serving application where data is not user-generated.
 * - No User-Specific Data: The ruleset does not contain logic for user-specific data, aligning with the application's
 *   focus on serving public information. If user profiles were added, they would be secured under a separate
 *   `/users/{userId}` path.
 *
 * Denormalization for Authorization: Not applicable in this model. Since authorization is not user-dependent (it's
 * either public-read or no-write), there is no need to denormalize ownership or role data onto documents.
 *
 * Structural Segregation: The use of separate top-level collections for each data type (e.g., /ventures, /partnerships)
 * is a core design principle, ensuring that security rules are simple, isolated, and easy to maintain.
 */
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    // Helper functions for readability and reuse.
    
    /**
     * Checks if the user is authenticated.
     */
    // function isSignedIn() {
    //   return request.auth != null;
    // }

    /**
     * @description Allows public, read-only access to venture data.
     * @path /ventures/{ventureId}
     * @allow Any user, authenticated or not, can read a specific venture document. (get)
     * @deny No user can create a new venture document through the client SDKs. (create)
     * @principle Provides public, read-only access to static application data. Writes are disabled to protect data integrity, assuming content is managed by administrators.
     */
    match /ventures/{ventureId} {
      // Allow any client to read venture data.
      allow get: if true;
      allow list: if true;

      // Disallow any client from writing venture data.
      allow create: if false;
      allow update: if false;
      allow delete: if false;
    }

    /**
     * @description Allows public, read-only access to capability data.
     * @path /capabilities/{capabilityId}
     * @allow Any user, authenticated or not, can list all capability documents. (list)
     * @deny No user can update an existing capability document through the client SDKs. (update)
     * @principle Provides public, read-only access to static application data. Writes are disabled to protect data integrity, assuming content is managed by administrators.
     */
    match /capabilities/{capabilityId} {
      // Allow any client to read capability data.
      allow get: if true;
      allow list: if true;

      // Disallow any client from writing capability data.
      allow create: if false;
      allow update: if false;
      allow delete: if false;
    }

    /**
     * @description Allows public, read-only access to job opportunity data.
     * @path /jobOpportunities/{jobOpportunityId}
     * @allow Any user, authenticated or not, can read a specific job opportunity. (get)
     * @deny No user can delete a job opportunity document through the client SDKs. (delete)
     * @principle Provides public, read-only access to static application data. Writes are disabled to protect data integrity, assuming content is managed by administrators.
     */
    match /jobOpportunities/{jobOpportunityId} {
      // Allow any client to read job opportunity data.
      allow get: if true;
      allow list: if true;

      // Disallow any client from writing job opportunity data.
      allow create: if false;
      allow update: if false;
      allow delete: if false;
    }

    /**
     * @description Allows public, read-only access to partnership data.
     * @path /partnerships/{partnershipId}
     * @allow Any user, authenticated or not, can list all partnership documents. (list)
     * @deny No user can create a new partnership document through the client SDKs. (create)
     * @principle Provides public, read-only access to static application data. Writes are disabled to protect data integrity, assuming content is managed by administrators.
     */
    match /partnerships/{partnershipId} {
      // Allow any client to read partnership data.
      allow get: if true;
      allow list: if true;

      // Disallow any client from writing partnership data.
      allow create: if false;
      allow update: if false;
      allow delete: if false;
    }
  }
}